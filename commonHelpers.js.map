{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '41755914-7aa1ef8e2afd56281fb8e3373';\n\nexport function getPhotos(userQuery) {\n  return fetch(\n    `https://pixabay.com/api/?key=${API_KEY}&q=${userQuery}&image_type=photo&orientation=horizontal&safesearch=true`\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n","import { imagesList } from '../main';\nimport { lightboxInstance } from '../main';\n\nexport function renderPhoto(imagesArray) {\n  const imgElements = imagesArray\n    .map(image => {\n      return `<li class=\"gallery-card\"><a class=\"gallery-link\" href=\"${image.href}\"><img class=\"gallery-image\" src=\"${image.src}\" alt=\"${image.alt}\" /><div class=\"image-stats-card\"><div class=\"image-stats-block\"><p>Likes</p>${image.likes}</div><div class=\"image-stats-block\"><p>Views</p>${image.views}</div><div class=\"image-stats-block\"><p>Comments</p>${image.comments}</div><div class=\"image-stats-block\"><p>Downloads</p>${image.downloads}</div></div></a></li>`;\n    })\n    .join('');\n  imagesList.insertAdjacentHTML('beforeend', imgElements);\n  lightboxInstance.refresh();\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { renderPhoto } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nconst loaderElement = document.querySelector('.loader');\nexport const imagesList = document.querySelector('.gallery');\nexport const lightboxInstance = new SimpleLightbox('.gallery .gallery-link', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nhideLoader();\nsearchForm.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  showLoader();\n  imagesList.innerHTML = '';\n\n  let imagesArray = [];\n\n  const userQuery = encodeURIComponent(event.target.elements['search'].value);\n\n  getPhotos(userQuery)\n    .then(data => {\n      if (userQuery === '') {\n        iziToast.error({\n          message: 'Please enter your search query!',\n          messageColor: '#FFF',\n          messageSize: '16',\n          backgroundColor: '#EF4040',\n          position: 'topRight',\n          icon: 'ico-error',\n          iconColor: '#FFF',\n        });\n        hideLoader();\n      } else if (data.total === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n          messageColor: '#FFF',\n          messageSize: '16',\n          backgroundColor: '#EF4040',\n          position: 'topRight',\n          icon: 'ico-error',\n          iconColor: '#FFF',\n        });\n        hideLoader();\n      } else {\n        const hitsArray = data.hits;\n\n        imagesArray = hitsArray.map(Object => {\n          return {\n            href: Object.largeImageURL,\n            src: Object.webformatURL,\n            alt: Object.tags,\n            likes: Object.likes,\n            views: Object.views,\n            comments: Object.comments,\n            downloads: Object.downloads,\n          };\n        });\n        renderPhoto(imagesArray);\n        hideLoader();\n        searchForm.reset();\n      }\n    })\n    .catch(error => {\n      console.log(error);\n      hideLoader();\n    });\n}\n\nfunction showLoader() {\n  loaderElement.style.display = 'block';\n}\nfunction hideLoader() {\n  loaderElement.style.display = 'none';\n}\n"],"names":["API_KEY","getPhotos","userQuery","response","renderPhoto","imagesArray","imgElements","image","imagesList","lightboxInstance","searchForm","loaderElement","SimpleLightbox","hideLoader","handleSubmit","event","showLoader","data","iziToast","Object","error"],"mappings":"6vBAAA,MAAMA,EAAU,qCAET,SAASC,EAAUC,EAAW,CACnC,OAAO,MACL,gCAAgCF,CAAO,MAAME,CAAS,0DAC1D,EAAI,KAAKC,GAAY,CACjB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CCRO,SAASC,EAAYC,EAAa,CACvC,MAAMC,EAAcD,EACjB,IAAIE,GACI,0DAA0DA,EAAM,IAAI,qCAAqCA,EAAM,GAAG,UAAUA,EAAM,GAAG,gFAAgFA,EAAM,KAAK,oDAAoDA,EAAM,KAAK,uDAAuDA,EAAM,QAAQ,wDAAwDA,EAAM,SAAS,uBACnb,EACA,KAAK,EAAE,EACVC,EAAW,mBAAmB,YAAaF,CAAW,EACtDG,EAAiB,QAAO,CAC1B,CCHA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAgB,SAAS,cAAc,SAAS,EACzCH,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAmB,IAAIG,EAAe,yBAA0B,CAC3E,SAAU,GACV,aAAc,MACd,gBAAiB,QACnB,CAAC,EAEDC,IACAH,EAAW,iBAAiB,SAAUI,CAAY,EAElD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBC,IACAR,EAAW,UAAY,GAEvB,IAAIH,EAAc,CAAA,EAElB,MAAMH,EAAY,mBAAmBa,EAAM,OAAO,SAAS,OAAU,KAAK,EAE1Ed,EAAUC,CAAS,EAChB,KAAKe,GAAQ,CACRf,IAAc,IAChBgB,EAAS,MAAM,CACb,QAAS,kCACT,aAAc,OACd,YAAa,KACb,gBAAiB,UACjB,SAAU,WACV,KAAM,YACN,UAAW,MACrB,CAAS,EACDL,KACSI,EAAK,QAAU,GACxBC,EAAS,MAAM,CACb,QACE,4EACF,aAAc,OACd,YAAa,KACb,gBAAiB,UACjB,SAAU,WACV,KAAM,YACN,UAAW,MACrB,CAAS,EACDL,MAIAR,EAFkBY,EAAK,KAEC,IAAIE,IACnB,CACL,KAAMA,EAAO,cACb,IAAKA,EAAO,aACZ,IAAKA,EAAO,KACZ,MAAOA,EAAO,MACd,MAAOA,EAAO,MACd,SAAUA,EAAO,SACjB,UAAWA,EAAO,SAC9B,EACS,EACDf,EAAYC,CAAW,EACvBQ,IACAH,EAAW,MAAK,EAExB,CAAK,EACA,MAAMU,GAAS,CACd,QAAQ,IAAIA,CAAK,EACjBP,GACN,CAAK,CACL,CAEA,SAASG,GAAa,CACpBL,EAAc,MAAM,QAAU,OAChC,CACA,SAASE,GAAa,CACpBF,EAAc,MAAM,QAAU,MAChC"}